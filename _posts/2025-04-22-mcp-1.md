---
layout: post
title: "MCP初探"
date: 2025-04-22 10:00:00 +0800
categories: [AI]
tags: [Claude, OpenAi, 大模型, mcp]
---

# 理解 MCP：让大模型真正动起来

在智能体（Agent）和大模型的结合越来越深入的今天，MCP（Model Callable Plugin）作为大模型能力拓展的一种方式，正变得越来越重要。本文结合我的实践经验，系统梳理 MCP、Function Call 的原理与关系，并分析它们如何一起协作、发挥威力。

## 1. 什么是 MCP（Model Callable Plugin）

MCP（Model Context Protocol，模型上下文协议）是由 Anthropic 公司（也就是开发 Claude 模型的公司）推出的一个开放标准协议，就像是一个 “通用插头” 或者 “USB 接口”，制定了统一的规范，不管是连接数据库、第三方 API，还是本地文件等各种外部资源，目的就是为了解决 AI 模型与外部数据源、工具交互的难题。它通常包含以下核心要素：

- **能力封装**：MCP 是一个具备特定业务逻辑的 API 服务（如查询天气、操作 GitHub、访问数据库）。
- **结构化接口**：MCP 必须提供标准化的 JSON Schema，用于描述如何被调用（参数、返回结构）。
- **可解释执行**：大模型通过 Function Call 理解接口结构并构造调用参数，从而发起请求。

MCP = Plugin + 标准接口 + 被大模型“理解和调用”的能力。


![image](https://github.com/user-attachments/assets/cc2b4c0c-abd6-42db-b8d7-b5efd90d8bd2)


作为mcp的开发者和使用者，可以多在mcp的网站上看看别人提供了什么样的工具，怎么使用给自己找找灵感也减少重复造轮子的可能。

![image](https://github.com/user-attachments/assets/e8d54527-a822-404b-bb79-c901cb7ecf87)

## 2. 什么是 Function Call？

在描述mcp的时候就不得不提到一个概念：*function call*

Function Call 是一种大模型（如 OpenAI GPT-4）支持的机制，允许开发者将函数定义（包括函数名、参数 schema 和描述）作为上下文传入，大模型将基于对用户意图的理解主动构造函数调用。

Function Call 支持的过程包括：

- 函数注册（提供 JSON schema）
- 用户发起自然语言请求
- 模型判断是否触发函数
- 自动填参并返回调用结构（如：`{"name": "get_weather", "arguments": { "city": "Beijing" }}`）

![image](https://github.com/user-attachments/assets/12705a6a-2ed5-47ce-bc25-8f2cbe4f33f0)


注： funcationcall 不是每个模型都支持，在使用的时候需要注意分辨


## 3. MCP 与 Function Call 的关系


| 对比点    | MCP                | Function Call                     |
|-----------|--------------------|-----------------------------------|
| 定义者    | 开发者（写接口）   | LLM 平台（如 OpenAI）             |
| 执行角色  | 后端服务/插件      | 大模型（判断并填参）              |
| 触发方式  | 被调用             | 主动调用                          |
| 内容描述  | 提供接口 schema    | 接收并使用 schema                 |
| 核心价值  | 封装外部功能       | 自然语言映射为结构化调用          |




✅ **MCP 是执行单元，Function Call 是触发机制**。  
在一个作者认为比较友好的系统里面，他们之间的关系应该是这样的，既有function call的优雅，又具备了MCP的灵活和可插拔：

> 用户请求 → 大模型判断 → 发起 Function Call → 调用 MCP → 返回结果 → 再由模型回复用户

